# goneat Tools Configuration (v1.0.0)
# Generated by: goneat doctor tools init
#
# This file is the SINGLE SOURCE OF TRUTH for tools configuration.
# There are NO hidden defaults or runtime merging.
#
# goneat is a polyglot project - we test ALL language integrations:
# - Go: Primary implementation language
# - Rust: cargo-deny, cargo-clippy integration testing
# - Python: ruff integration testing
# - TypeScript: biome integration testing
#
# Usage:
#   goneat doctor tools --scope foundation,go --install --yes  # Go-only project
#   goneat doctor tools --scope all --install --yes            # Polyglot (like this repo)
#
# Validate changes with: goneat doctor tools validate
# See schema: schemas/tools/v1.1.0/tools-config.yaml

scopes:
  foundation:
    description: Language-agnostic tools for all projects
    tools:
      - ripgrep
      - jq
      - yq
      - yamlfmt
      - prettier
      - yamllint
      - shfmt
      - shellcheck
      - actionlint
      - checkmake
      - minisign

  go:
    description: Go development tools
    tools:
      - go
      - go-licenses
      - golangci-lint
      - goimports
      - gofmt
      - gosec
      - govulncheck

  rust:
    description: Rust development tools (Cargo plugins)
    tools:
      - cargo-deny
      - cargo-audit

  python:
    description: Python development tools
    tools:
      - ruff

  typescript:
    description: TypeScript/JavaScript development tools
    tools:
      - biome
      - tsc

  security:
    description: Cross-language security scanning
    tools:
      - gitleaks

  sbom:
    description: Software Bill of Materials (SBOM) generation and vulnerability scanning
    tools:
      - syft
      - grype

tools:
  # ==========================================================================
  # FOUNDATION TOOLS - Language-agnostic
  # ==========================================================================
  ripgrep:
    name: ripgrep
    description: Fast text search - used by goneat for content scanning
    kind: system
    detect_command: rg --version
    platforms:
      - darwin
      - linux
      - windows
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop
        - winget

  jq:
    name: jq
    description: JSON processor - used in CI/CD scripts
    kind: system
    detect_command: jq --version
    platforms:
      - darwin
      - linux
      - windows
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop
        - winget

  yq:
    name: yq
    description: YAML processor
    kind: system
    detect_command: yq --version
    platforms:
      - darwin
      - linux
      - windows
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop
        - winget

  yamlfmt:
    name: yamlfmt
    description: YAML formatter
    kind: go
    detect_command: yamlfmt --version
    install_package: github.com/google/yamlfmt/cmd/yamlfmt@latest
    version_args:
      - --version
    check_args:
      - --help
    installer_priority:
      all:
        - go-install

  # NOTE: prettier is in foundation because it's our ONLY Markdown formatter.
  # For TypeScript/JavaScript projects, biome handles TS/JS/JSON formatting.
  prettier:
    name: prettier
    description: Markdown formatter (foundation scope for docs)
    kind: node
    detect_command: prettier --version
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - bun
        - npm

  yamllint:
    name: yamllint
    description: YAML syntax linting
    kind: system
    detect_command: yamllint --version
    platforms:
      - darwin
      - linux
      - windows
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop

  shfmt:
    name: shfmt
    description: Shell script formatter
    kind: go
    detect_command: shfmt -version
    install_package: mvdan.cc/sh/v3/cmd/shfmt@latest
    version_args:
      - -version
    check_args:
      - -version
    installer_priority:
      all:
        - go-install

  shellcheck:
    name: shellcheck
    description: Shell script analyzer
    kind: system
    detect_command: shellcheck --version
    platforms:
      - darwin
      - linux
      - windows
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop
        - winget

  actionlint:
    name: actionlint
    description: GitHub Actions workflow linter
    kind: go
    detect_command: actionlint -version
    install_package: github.com/rhysd/actionlint/cmd/actionlint@latest
    version_args:
      - -version
    check_args:
      - -help
    installer_priority:
      all:
        - go-install

  checkmake:
    name: checkmake
    description: Makefile linter
    kind: go
    detect_command: checkmake -v
    install_package: github.com/mrtazz/checkmake@latest
    version_args:
      - -v
    check_args:
      - -h
    installer_priority:
      all:
        - go-install

  minisign:
    name: minisign
    description: Minimal signing utility for release artifacts
    kind: system
    detect_command: minisign -v
    platforms:
      - darwin
      - linux
      - windows
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop

  # ==========================================================================
  # GO TOOLS
  # ==========================================================================
  go:
    name: go
    description: Go toolchain
    kind: system
    detect_command: go version
    platforms:
      - darwin
      - linux
      - windows
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop
        - winget
    version_scheme: semver
    minimum_version: "1.21.0"
    recommended_version: "1.23.0"

  go-licenses:
    name: go-licenses
    description: License compliance for Go dependencies
    kind: go
    detect_command: go-licenses -h
    install_package: github.com/google/go-licenses@latest
    check_args:
      - -h
    installer_priority:
      all:
        - go-install

  golangci-lint:
    name: golangci-lint
    description: Fast linters runner for Go
    kind: go
    detect_command: golangci-lint --version
    install_package: github.com/golangci/golangci-lint/v2/cmd/golangci-lint@latest
    version_args:
      - --version
    check_args:
      - --help
    installer_priority:
      all:
        - go-install
    version_scheme: semver
    minimum_version: "2.0.0"
    recommended_version: "2.4.0"

  goimports:
    name: goimports
    description: Go import formatter
    kind: go
    detect_command: goimports -h
    install_package: golang.org/x/tools/cmd/goimports@latest
    check_args:
      - -h
    installer_priority:
      all:
        - go-install

  gofmt:
    name: gofmt
    description: Go formatter (bundled with Go toolchain)
    kind: bundled-go
    detect_command: gofmt -h
    check_args:
      - -h
    installer_priority:
      all:
        - builtin

  gosec:
    name: gosec
    description: Go security checker
    kind: go
    detect_command: gosec -version
    install_package: github.com/securego/gosec/v2/cmd/gosec@latest
    version_args:
      - -version
    check_args:
      - -h
    installer_priority:
      all:
        - go-install

  govulncheck:
    name: govulncheck
    description: Go vulnerability checker
    kind: go
    detect_command: govulncheck -version
    install_package: golang.org/x/vuln/cmd/govulncheck@latest
    version_args:
      - -version
    check_args:
      - -h
    installer_priority:
      all:
        - go-install

  # ==========================================================================
  # RUST TOOLS
  # ==========================================================================
  cargo-deny:
    name: cargo-deny
    description: Rust dependency license, advisory, and ban checks
    kind: cargo
    detect_command: cargo deny --version
    install_package: cargo-deny
    version_args:
      - deny
      - --version
    check_args:
      - deny
      - --help
    installer_priority:
      all:
        - cargo-install
    version_scheme: semver
    minimum_version: "0.14.0"
    recommended_version: "0.16.0"

  cargo-audit:
    name: cargo-audit
    description: Rust security vulnerability scanner (RustSec advisories)
    kind: cargo
    detect_command: cargo audit --version
    install_package: cargo-audit
    version_args:
      - audit
      - --version
    check_args:
      - audit
      - --help
    installer_priority:
      all:
        - cargo-install
    version_scheme: semver
    minimum_version: "0.18.0"
    recommended_version: "0.21.0"

  # ==========================================================================
  # PYTHON TOOLS
  # ==========================================================================
  ruff:
    name: ruff
    description: Fast Python linter and formatter (replaces black, flake8, isort)
    kind: python
    detect_command: ruff --version
    installer_priority:
      all:
        - uv
        - pip

  # ==========================================================================
  # TYPESCRIPT TOOLS
  # ==========================================================================
  # biome is our opinionated choice for TS/JS - handles linting AND formatting
  # for TypeScript, JavaScript, AND JSON files. Faster than prettier+eslint.
  biome:
    name: biome
    description: TypeScript/JavaScript/JSON linter and formatter
    kind: node
    detect_command: biome --version
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - bun
        - npm

  tsc:
    name: tsc
    description: TypeScript compiler for type checking
    kind: node
    detect_command: tsc --version
    installer_priority:
      darwin:
        - bun
        - npm
      linux:
        - bun
        - npm
      windows:
        - bun
        - npm

  # ==========================================================================
  # SECURITY TOOLS
  # ==========================================================================
  gitleaks:
    name: gitleaks
    description: Git secrets scanner (all repositories)
    kind: go
    detect_command: gitleaks version
    install_package: github.com/zricethezav/gitleaks/v8@latest
    version_args:
      - version
    check_args:
      - help
    installer_priority:
      all:
        - go-install

  # ==========================================================================
  # SBOM TOOLS
  # ==========================================================================
  syft:
    name: syft
    description: SBOM generator for software supply chain security
    kind: system
    detect_command: syft version
    platforms:
      - darwin
      - linux
      - windows
    version_args:
      - version
    check_args:
      - --help
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop

  grype:
    name: grype
    description: Vulnerability scanner for container images and SBOMs
    kind: system
    detect_command: grype version
    platforms:
      - darwin
      - linux
      - windows
    version_args:
      - version
    check_args:
      - --help
    installer_priority:
      darwin:
        - brew
      linux:
        - brew
      windows:
        - scoop
