# Goneat SSOT Consumer Configuration (Production)
# Defines how goneat syncs documentation and schemas from the crucible repository.
#
# v0.3.4+ DX: No .local.yaml file = production/remote config (auto-detection disabled)
# For local development, create .goneat/ssot-consumer.local.yaml with localPath override.
# See ssot-consumer.local.yaml.example for reference.
#
# Priority:
#   1. Command-line flags (--local-path or --force-remote)
#   2. Environment variables (GONEAT_FORCE_REMOTE_SYNC=1, GONEAT_SSOT_CONSUMER_<SOURCE>_LOCAL_PATH)
#   3. ssot-consumer.local.yaml (gitignored, for local development)
#   4. ssot-consumer.yaml (this file, committed)
#   5. Convention-based (../<source>) - only if .local.yaml exists
version: v1.1.0
sources:
  - name: crucible
    repo: fulmenhq/crucible
    ref: v0.2.27
    # Without .local.yaml, goneat clones from GitHub (force-remote friendly)
    force_remote: true
    sync_path_base: .
    # NOTE: Crucible no longer exports a dedicated lang/go mirror. We sync from repo root for now,
    # but may switch to consuming gofulmen (or embedding Crucible directly) in a future release.
    assets:
      - type: config
        source_path: config
        paths:
          - "**/*"
        subdir: config/crucible-go
      - type: doc
        source_path: docs
        paths:
          - standards/**
          - architecture/**
          - guides/**
          - sop/**
        subdir: docs/crucible-go
      - type: schema
        source_path: schemas
        paths:
          - "**/*"
        subdir: schemas/crucible-go
strategy:
  on_conflict: overwrite
  prune_stale: true
  verify_checksums: false
