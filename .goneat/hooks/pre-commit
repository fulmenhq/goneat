#!/bin/bash
# Generated by goneat hooks generate
# This hook uses goneat's orchestrated assessment system

set -e

echo "ğŸ” Running goneat pre-commit validation..."

# Check if goneat is available
if ! command -v goneat &> /dev/null; then
    echo "âš ï¸  goneat not found, falling back to basic validation"
    echo "ğŸ’¡ Install goneat for intelligent validation"

    # Fallback to basic Go tools
    if command -v gofmt &> /dev/null; then
        echo "ğŸ”§ Running go fmt..."
        gofmt -l . | head -10
        if [ $? -ne 0 ]; then
            echo "âŒ Formatting issues found"
            echo "ğŸ’¡ Run 'gofmt -w .' to fix"
            exit 1
        fi
    fi

    if command -v go &> /dev/null; then
        echo "ğŸ”§ Running go vet..."
        go vet ./... 2>&1 | head -10
        if [ ${PIPESTATUS[0]} -ne 0 ]; then
            echo "âŒ Vet issues found"
            exit 1
        fi
    fi

    echo "âœ… Basic validation passed"
    exit 0
fi

# Use goneat's orchestrated assessment
goneat assess --hook pre-commit

# If we get here, validation passed
echo "âœ… Pre-commit validation passed!"
echo "ğŸ¯ Ready to commit with intelligent validation"
