# Goneat v0.5.2 — Full JSON Schema Draft Coverage

**Release Date**: 2026-01-21
**Status**: Stable

## TL;DR

- **Full JSON Schema draft coverage**: Validate Draft-04 through 2020-12 (all five major versions) with offline `$ref` resolution
- **Schema CLI improvements**: Glob patterns and recursive directory validation
- **Tools config fixes**: `min_version` alias support, schema validation now enforced
- **Dependency modernization**: 84 packages updated across 3 staged releases, including OPA and container ecosystem
- **No breaking changes**: Additive features and maintenance only

## JSON Schema: Full Draft Coverage

Goneat now validates JSON Schemas across **all five major versions**—from the 2013-era Draft-04 still used in Kubernetes CRDs to the 2020-12 standard required by OpenAPI 3.1.

### Why This Matters

Enterprise codebases accumulate schemas over years. A Kubernetes operator from 2018 uses Draft-04. Your new API gateway uses 2020-12. Before v0.5.2, you needed different tools or forced migrations. Now one command handles everything.

### Supported Drafts

| Schema ID              | Version         | Typical Use                                |
| ---------------------- | --------------- | ------------------------------------------ |
| `json-schema-draft-04` | Draft-04 (2013) | Kubernetes CRDs, legacy enterprise configs |
| `json-schema-draft-06` | Draft-06 (2017) | Transitional schemas                       |
| `json-schema-draft-07` | Draft-07 (2017) | Community standard, most common            |
| `json-schema-2019-09`  | 2019-09         | OpenAPI 3.0.x                              |
| `json-schema-2020-12`  | 2020-12         | OpenAPI 3.1, current standard              |

All meta-schemas are embedded for **air-gapped CI environments**—no network calls required.

### Practical Workflow: Discover Then Validate

Pair `pathfinder` discovery with `schema validate-schema` for a complete workflow:

```bash
# Discover schemas in your repo
goneat pathfinder find --schemas

# Validate everything in one pass (auto-detects draft from $schema field)
goneat schema validate-schema --recursive ./schemas/

# Or pipe discovery directly to validation
goneat pathfinder find --schemas --output-mode files | xargs goneat schema validate-schema
```

### Targeted Validation by Draft

For bulk validation of known-version schemas, use `--schema-id`:

```bash
# Validate legacy Draft-04 schemas (Kubernetes, enterprise configs)
goneat schema validate-schema --schema-id json-schema-draft-04 ./k8s-schemas/

# Validate OpenAPI 3.1 schemas (2020-12)
goneat schema validate-schema --schema-id json-schema-2020-12 ./openapi/
```

### Glob and Directory Support

New in v0.5.2: validate schemas using glob patterns or entire directories:

```bash
# Glob patterns
goneat schema validate-schema "schemas/**/*.json"

# Recursive directory scan
goneat schema validate-schema --recursive ./schemas/
```

## Dependency Modernization

This release updates 84 packages through a staged approach designed for stability and traceability.

### Stage Summary

| Stage   | Focus                                   | Risk       |
| ------- | --------------------------------------- | ---------- |
| Stage 1 | Patch versions, `golang.org/x/*`        | Low        |
| Stage 2 | Security updates, minor bumps           | Low-Medium |
| Stage 3 | OPA, OpenTelemetry, container ecosystem | Medium     |

### Notable Updates

- **OPA (Open Policy Agent)**: Policy engine used by validation workflows
- **OpenTelemetry**: Observability instrumentation libraries
- **Container ecosystem**: Dependencies used by SBOM and vulnerability tooling

Each stage passed full validation (`make prepush`, `goneat dependencies --vuln`) before proceeding.

## Additional Improvements

### Vulnerability Summary Clarity

The `--vuln` output now reports accurate counts distinguishing between total vulnerabilities found and unique CVEs after deduplication.

### Tools Config: `min_version` Alias

The `min_version` field is now accepted as a deprecated alias for `minimum_version` in `.goneat/tools.yaml`. This provides backwards compatibility for existing configs while encouraging migration to the canonical name:

```yaml
tools:
  prettier:
    name: "prettier"
    description: "Code formatter"
    kind: "node"
    detect_command: "prettier --version"
    min_version: "3.0.0" # Accepted (deprecated alias)
    # minimum_version: "3.0.0"  # Preferred
```

Using both fields simultaneously is a schema validation error.

### Tools Config Schema Validation

Fixed a bug where `goneat doctor tools` was not validating `.goneat/tools.yaml` against the embedded schema. Invalid configs are now caught early with clear error messages.

## Upgrade Notes

**No breaking CLI changes.** This release is additive and maintenance-focused.

All features from v0.5.0 and v0.5.1 continue to work unchanged:

- Vulnerability scanning (`--vuln`)
- TypeScript typecheck (`--categories typecheck`)
- Hooks migration support (`--unset-hookspath`)

### Confidence Signals

- `make clean && make build && make test` passes
- `make prepush` (fmt, lint, test, security) passes
- `goneat dependencies --vuln` shows no new vulnerabilities
- All dependency updates validated through staged rollout

## Contributors

- Claude Opus 4.5 (devlead, prodmktg)
- @3leapsdave (supervision)
