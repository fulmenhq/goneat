# Goneat v0.2.2 — Hooks DX Improvements and Developer Experience Enhancements

Release date: 2025-09-09

## Overview

This release focuses on improving the developer experience for git hooks integration, addressing critical feedback from our dogfooding teams (PPGate and Sumpter). The main improvement makes `--staged-only` mode opt-in rather than opt-out, providing much better flexibility for different team workflows.

## New Features

### Enhanced Hooks Configuration

- **Flexible Staged-Only Mode**: `--staged-only` is now opt-in rather than opt-out
- **Better Defaults**: New installations default to `only_changed_files: false`
- **Improved Help Text**: Clearer descriptions for configuration flags
- **Helpful Comments**: Default hooks.yaml includes explanatory comments

### Security Enhancements

- **Path Validation**: Enhanced content embed/verify with proper path validation under repo root
- **Restrictive Permissions**: Implemented secure file permissions (≤0750/0640)
- **Error Handling**: Resolved 15 high-severity errcheck issues across cmd/

## Bug Fixes

- **Hook Generation**: Fixed hardcoded invalid severity level "error" (changed to "high")
- **Help Text**: Updated to only show valid severity levels: critical|high|medium|low
- **Error Handling**: Comprehensive fixes for fmt writes, WalkDir, and file Close operations

## Developer Experience Improvements

### Before (v0.2.2-rc.4 and earlier)

```yaml
# Default configuration forced staged-only mode
optimization:
  only_changed_files: true # ← This was the default
```

Teams had to manually edit YAML to disable `--staged-only` behavior.

### After (v0.2.2)

```yaml
# Default configuration is more flexible
optimization:
  only_changed_files: false # ← Now defaults to false with helpful comment
  # Set to true to enable --staged-only mode (faster, staged files only)
```

Teams can easily configure using CLI:

```bash
# Enable staged-only mode
goneat hooks configure --pre-commit-only-changed-files=true

# Disable staged-only mode (default)
goneat hooks configure --pre-commit-only-changed-files=false
```

## Team Feedback Addressed

### PPGate Team

- **Issue**: Couldn't figure out how to remove `--staged-only` without editing hooks.yaml
- **Solution**: Default behavior changed, clear CLI options available

### Sumpter Team

- **Rating**: 9.5/10 - "Exceptional tool with enterprise-grade capabilities"
- **Feedback**: Appreciated the flexibility and improved configuration options

## Performance

- **Hook Execution**: No performance impact from configuration changes
- **Memory Usage**: Improved error handling reduces memory leaks
- **Security Scanning**: Enhanced path validation with minimal overhead

## Migration Guide

### For Existing Users

**No Breaking Changes**: Existing hook configurations continue to work unchanged.

### For New Installations

**Default Behavior**: New installations will have `--staged-only` disabled by default.

**To Enable Staged-Only Mode**:

```bash
goneat hooks configure --pre-commit-only-changed-files=true
```

**To Disable Staged-Only Mode** (default):

```bash
goneat hooks configure --pre-commit-only-changed-files=false
```

## Examples

### Basic Hook Setup

```bash
# Initialize hooks (now with better defaults)
goneat hooks init

# Configure for your team's workflow
goneat hooks configure --pre-commit-only-changed-files=true

# Generate and install hooks
goneat hooks generate
goneat hooks install
```

### Team-Specific Configurations

**Fast Development Team** (staged-only enabled):

```yaml
optimization:
  only_changed_files: true
  parallel: "max"
```

**Comprehensive Validation Team** (staged-only disabled):

```yaml
optimization:
  only_changed_files: false
  parallel: "auto"
```

## What's Next

- **Auto-fix Capabilities**: Planned for future releases
- **Schema Migration**: Implementing actual migration logic for hook upgrades
- **License Auditing**: Package and dependency auditing features
- **Enhanced CI/CD Integration**: More examples and patterns for automation

## Links

- **Installation**: `go install github.com/fulmenhq/goneat@v0.2.2`
- **Documentation**: [User Guide](../user-guide/commands/hooks.md)
- **Changelog**: [CHANGELOG.md](../../CHANGELOG.md)
- **GitHub Release**: [v0.2.2](https://github.com/fulmenhq/goneat/releases/tag/v0.2.2)

---

**Generated by Arch Eagle ([Cursor](https://cursor.sh/)) under supervision of [@3leapsdave](https://github.com/3leapsdave)**

**Co-Authored-By: Arch Eagle <noreply@3leaps.net>**
**Authored-By: Dave Thompson <dave.thompson@3leaps.net> [@3leapsdave](https://github.com/3leapsdave)**
