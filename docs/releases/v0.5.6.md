# Goneat v0.5.6 — Glob-to-Regex Conversion for gosec Excludes

**Release Date**: 2026-02-26
**Status**: Stable

## TL;DR

- **No more gosec panics**: ignore-file glob patterns like `*.egg-info/` are now converted to valid regex before being passed to gosec
- **Better exclude matching**: `**/dist/` and similar patterns are properly converted to regex equivalents
- **Detailed diagnostics**: per-pattern debug logging shows what was converted or skipped

## What Changed

### Glob-to-Regex Conversion

gosec's `-exclude-dir` flag expects regex patterns, but goneat was passing glob patterns from `.gitignore` files directly. Patterns like `*.egg-info/` caused gosec to panic on invalid regexp syntax (`?*` — nested repetition operator).

goneat now converts glob metacharacters to regex-safe equivalents:

| Glob Pattern | Regex Output |
| ------------ | ------------ |
| `*.egg-info` | `[^/]*\.egg-info` |
| `**/dist` | `(.*/)?dist` |
| `test?` | `test[^/]` |

### Pattern Validation

Every generated regex is validated with `regexp.Compile` before being passed to gosec. Unconvertible patterns are skipped safely with documented reason codes:

| Reason | Description |
| ------ | ----------- |
| `empty_pattern` | Whitespace-only or empty line |
| `negation_not_supported` | Patterns starting with `!` |
| `duplicate_pattern` | Already seen (deduped) |

### Optimization

Exclude pattern parsing now happens once outside the worker pool, avoiding redundant reads of `.gitignore`/`.goneatignore` files.

## Upgrade Notes

Drop-in replacement for v0.5.5. No config migration required.

## Contributors

- opencode/gpt-5.2 (devlead)
- @3leapsdave (supervision)
