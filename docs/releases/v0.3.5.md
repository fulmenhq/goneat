# Goneat v0.3.5 — Dependencies Bug Fix

**Release Date**: 2025-11-11
**Status**: Release

## TL;DR

- **Dependencies Bug Fix**: Fixed `goneat dependencies` language detection for Go projects without root .go files
- **Dependency Update**: Updated go-git from v5.16.2 to v5.16.3
- **Impact**: Projects with code in subdirectories (cmd/, pkg/, internal/) now work correctly
- **Fast Follow**: Critical bug fix for v0.3.0 dependencies feature affecting sumpter and similar project structures

## What's Fixed

### Dependencies Language Detection

Fixed a critical bug where `goneat dependencies` would fail on Go projects that don't have `.go` files in the repository root directory.

**Problem**: The `go-licenses` library integration was passing `"."` as the scan pattern, which requires Go source files to exist in the current directory. Projects with all source code in subdirectories (cmd/, pkg/, internal/) would fail with:

```
Error: errors for ["."]:
.: -: no Go files in /path/to/project
```

**Solution**: Changed the scan pattern from `"."` to `"./..."` to scan all packages in the module, regardless of directory structure.

**Affected Projects**:

- ✅ **goneat** (has `main.go` at root) - worked before, still works
- ✅ **sumpter** (all code in subdirectories) - failed before, now works
- ✅ **Any Go project** with go.mod at root but no .go files in root directory

**Technical Details**:

Location: `pkg/dependencies/go_analyzer.go:64`

```go
// Before (v0.3.0-v0.3.4)
libraries, err := licenses.Libraries(ctx, classifier, false, nil, ".")

// After (v0.3.5+)
libraries, err := licenses.Libraries(ctx, classifier, false, nil, "./...")
```

The `./...` pattern is standard Go convention for "all packages in module" and works correctly whether or not there are .go files at the root.

## What's Changed

### Dependency Updates

- **go-git**: Updated from v5.16.2 to v5.16.3 for latest bug fixes and improvements

## Installation

```bash
# Go install (recommended)
go install github.com/fulmenhq/goneat@v0.3.5

# Verify installation
goneat version
# Output: goneat v0.3.5
```

## Upgrade Notes

**No configuration changes required**. Simply upgrade to v0.3.5:

```bash
go install github.com/fulmenhq/goneat@v0.3.5
```

**For sumpter users**: The dependencies infrastructure you set up in v0.3.4 will now work correctly without the language detection error. No changes needed to your `.goneat/dependencies.yaml` configuration.

## Testing

Tested against two project structures:

1. **goneat** (root .go files): `main.go` at root + cmd/pkg structure
2. **sumpter** (no root .go files): Only go.mod at root, all code in cmd/pkg

Both projects now successfully run `goneat dependencies --licenses` and generate correct dependency reports.

## Links

- **Repository**: https://github.com/fulmenhq/goneat
- **CHANGELOG**: See [CHANGELOG.md](../../CHANGELOG.md) for detailed changes
- **Previous Release**: [v0.3.4](v0.3.4.md) - Package Managers & SSOT DX
- **Dependencies Feature**: Introduced in [v0.3.0](v0.3.0.md)
