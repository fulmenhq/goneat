# Goneat v0.5.4 — Biome Nested-Config Fixes and YAML Parse Error Clarity

**Release Date**: 2026-02-25
**Status**: Stable

## TL;DR

- **Biome monorepo fix**: `goneat format` and `goneat format --check` now execute Biome from per-file resolved config context (nearest `biome.json`/`biome.jsonc`), fixing nested root config failures
- **Assess parity fix**: `goneat assess --categories format` now applies per-context Biome grouping, preventing nested-config JSON parse failures
- **YAML check UX fix**: yamlfmt parse errors are now surfaced as syntax errors instead of misleading "needs formatting" messages
- **Go toolchain updates**: gosec 2.23.0 taint analysis (G702/G703/G704) and golangci-lint 2.10 QF1012 expansion — see [Toolchain Updates](#toolchain-updates) for impact on your projects
- **New docs**: [Toolchain Reference](../../user-guide/toolchains/README.md) — per-language coverage for Go, TypeScript, Python, and Rust

## What Changed

### Biome Context Resolution in `format`

Biome 2.4+ can fail in monorepos with nested Biome roots when invoked from the
wrong working directory. goneat now resolves invocation context per file and runs
Biome from the nearest config root with relative file arguments.

This fixes failures like:

```
Found a nested root configuration, but there's already a root configuration.
```

### Biome Context Resolution in `assess`

`assess --categories format` and Biome lint assess paths now group JS/TS files by
resolved Biome context and execute per-group. This prevents mixed-root Biome
invocations that previously produced non-JSON output and parse errors.

This aligns assess behavior with `format`/`format --check` and fixes `make fmt-check`
flows that run assess first.

### YAML Parse Error Detection in Check Mode

`yamlfmt` exits with status 1 for both formatting differences and YAML syntax
errors. goneat now inspects output to distinguish these cases:

- Invalid YAML: reported as syntax error with yamlfmt details
- Valid but unformatted YAML: reported as needs formatting

Detection now uses case-insensitive matching for robustness.

### Incremental Lint Fix-Mode Guard

Restored expected behavior for `--fix --new-issues-only` by ensuring Biome lint
fix pass executes before incremental reporting.

## Toolchain Updates

goneat dogfoods its own `doctor tools --upgrade` infrastructure. v0.5.4 absorbed
two Go ecosystem changes that affect any project goneat assesses.

### Go: gosec 2.23.0 — Taint Analysis

gosec 2.23.0 introduced three inter-procedural taint analysis rules that are
distinct from the older file-access and subprocess rules:

| Rule | Name                        | Description                       |
| ---- | --------------------------- | --------------------------------- |
| G702 | Command injection via taint | Exec calls with taint-traced args |
| G703 | Path traversal via taint    | File ops with taint-traced paths  |
| G704 | SSRF via taint              | HTTP calls with taint-traced URLs |

These rules trace data flow across function boundaries. Code that passes
env-var-derived paths through helpers before calling `os.Open`, or passes
config-loaded URLs into `http.Client.Do`, will be flagged even when the direct
call site looks clean.

**What this means for your projects:** If you run `goneat assess --categories security`
and have upgraded to gosec 2.23.0+, expect new findings in packages that intentionally
handle file paths from config/env, make HTTP requests to external services, or run
external programs with config-derived args. **Existing `#nosec G304` or `#nosec G204`
comments do not suppress G703/G704/G702** — the taint rules must be listed explicitly:

```go
// Before: suppresses file-access rule, not taint analysis
if _, err := os.Stat(path); err == nil { // #nosec G304

// After: suppresses both
if _, err := os.Stat(path); err == nil { // #nosec G304 G703 - path from validated config
```

### Go: golangci-lint 2.10 — QF1012 Expansion

golangci-lint 2.10 expands QF1012 (staticcheck) to flag `WriteString(fmt.Sprintf(…))`
across more patterns, preferring `fmt.Fprintf` directly. With the default
`max-same-issues: 3`, findings rotate across files per run. To surface all at once:

```yaml
# .golangci.yml
issues:
  max-same-issues: 0
```

Fix: `sb.WriteString(fmt.Sprintf("…", x))` → `fmt.Fprintf(&sb, "…", x)` for
`strings.Builder` and `bytes.Buffer` value types.

## Upgrade Notes

Drop-in replacement for v0.5.3. No configuration changes required.

For local dogfooding, install the latest built binary before downstream testing:

```bash
make build install
goneat version
```

## Contributors

- gemini-3.1-pro (devlead)
- Claude Opus 4.6 (devlead)
- Claude Sonnet 4.6 (releng)
- @3leapsdave (supervision)
