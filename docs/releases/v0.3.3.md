# Goneat v0.3.3 — Cryptographic Release Signing

**Release Date**: 2025-10-28
**Status**: Release

## TL;DR

- **Release Signing Infrastructure**: Mandatory PGP/GPG signing for all release artifacts
- **Supply Chain Security**: Cryptographic verification establishes artifact authenticity
- **Homebrew/Scoop Ready**: Signing infrastructure prerequisite for package manager distribution

## What's New

### Cryptographic Release Signing Infrastructure

Goneat v0.3.3 establishes the foundation for cryptographically signed releases, ensuring users can verify the authenticity and integrity of all release artifacts. This is a critical prerequisite for distribution through package managers like Homebrew and Scoop.

**Key Components**:

1. **FulmenHQ Release Signing Key**: Official PGP keypair with hardware-backed signing subkey
2. **Manual Signing Workflow**: Documented process for maintainers using YubiKey
3. **User Verification**: Complete instructions for verifying artifact signatures
4. **CI Prerequisites**: GitHub Actions workflow updated with GPG tooling

**Documentation**:
- **Security Guide**: `docs/security/release-signing.md` - Complete signing and verification guide
- **Release Checklist**: Updated with cryptographic signing steps
- **Key Management**: Documented custodianship, rotation, and revocation procedures

### For Users: Verifying Releases

Starting with v0.3.3, all release artifacts will be signed. Verify authenticity before installing:

```bash
# Download artifact and signature
curl -LO https://github.com/fulmenhq/goneat/releases/download/v0.3.3/goneat-darwin-arm64.tar.gz
curl -LO https://github.com/fulmenhq/goneat/releases/download/v0.3.3/goneat-darwin-arm64.tar.gz.asc

# Import FulmenHQ public key
curl -L https://github.com/fulmenhq/goneat/releases/download/v0.3.3/fulmenhq-release-signing-key.asc | gpg --import

# Verify signature
gpg --verify goneat-darwin-arm64.tar.gz.asc goneat-darwin-arm64.tar.gz
```

**Expected Output**:
```
gpg: Good signature from "FulmenHQ Release Signing <security@fulmenhq.dev>"
```

**Warning Signs (DO NOT install)**:
```
gpg: BAD signature
gpg: Can't check signature: No public key
```

### For Maintainers: Signing Workflow

Release managers will sign artifacts using the manual workflow:

1. **Build and Package**: Standard release build (`make build-all`, `scripts/package-artifacts.sh`)
2. **Generate Checksums**: `cd dist/release && sha256sum *.tar.gz *.zip > SHA256SUMS`
3. **Sign Artifacts**: Using YubiKey-backed subkey (`gpg --local-user 448A539320A397AF! --detach-sign --armor`)
4. **Verify Locally**: Test all signatures before upload (`gpg --verify *.asc`)
5. **Publish**: Upload binaries, signatures, checksums, and public key

See `docs/security/release-signing.md` for complete step-by-step workflow.

### Infrastructure Updates

**GitHub Actions** (`.github/workflows/release.yml`):
- ✅ GPG tooling prerequisites installed (gnupg2)
- ✅ Workflow prepared for future signing automation
- ⏳ Actual signing deferred to post-v0.3.3 (manual workflow first)

**Security Documentation**:
- ✅ `docs/security/release-signing.md` - Comprehensive signing guide
  - Key management and rotation procedures
  - User verification instructions
  - Maintainer signing workflow
  - Troubleshooting and emergency procedures
  - CI automation roadmap

**Release Checklist** (`RELEASE_CHECKLIST.md`):
- ✅ Cryptographic signing section added
  - YubiKey prerequisites verification
  - Checksum generation steps
  - Signature creation and verification gates
  - Public key publication checklist

## Roadmap: Signing Automation

**Phase 1 (v0.3.3)**: ✅ Manual signing + infrastructure
- Manual signing workflow with YubiKey
- CI tooling prerequisites installed
- Documentation complete

**Phase 2 (v0.3.4+)**: Automated CI signing
- Deploy CI signing subkey
- Secrets management (OIDC/Vault)
- Automated signature generation

**Phase 3 (v0.4.0+)**: Verification gates
- Automated signature verification in CI
- Pre-merge verification gates

**Phase 4 (v0.5.0+)**: Advanced provenance
- Sigstore integration
- SLSA provenance attestation

## Technical Details

### Key Structure

```
FulmenHQ Release Signing Key
├─ Primary Key (offline)
│  ├─ ID: ed25519/3E0AD9999CF3D418
│  └─ Purpose: Certification, revocation
├─ Signing Subkey (Manual)
│  ├─ ID: ed25519/448A539320A397AF
│  ├─ Location: YubiKey hardware token
│  ├─ Purpose: Manual artifact signing (v0.3.3+)
│  ├─ Algorithm: ECC (Curve25519)
│  └─ Usage: --local-user 448A539320A397AF!
└─ Signing Subkey (CI) - staged
   ├─ ID: ed25519/45342521E9536A31
   ├─ Location: Encrypted storage (not deployed yet)
   ├─ Purpose: Future CI automation
   ├─ Status: Inactive until Phase 2
   └─ Future Usage: --local-user 45342521E9536A31!
```

### Signature Verification Example

```bash
#!/bin/bash
set -e

VERSION="v0.3.3"
PLATFORM="darwin-arm64"
ARTIFACT="goneat-${PLATFORM}.tar.gz"

# Import public key
curl -L "https://github.com/fulmenhq/goneat/releases/download/${VERSION}/fulmenhq-release-signing-key.asc" | gpg --import

# Download artifact and signature
curl -LO "https://github.com/fulmenhq/goneat/releases/download/${VERSION}/${ARTIFACT}"
curl -LO "https://github.com/fulmenhq/goneat/releases/download/${VERSION}/${ARTIFACT}.asc"

# Verify signature
if gpg --verify "${ARTIFACT}.asc" "${ARTIFACT}"; then
    echo "✅ Signature valid - safe to install"
    tar -xzf "${ARTIFACT}"
else
    echo "❌ Signature verification FAILED - DO NOT INSTALL"
    exit 1
fi
```

### Security Considerations

**For Users**:
- Always verify signatures before installation
- Match key fingerprint with multiple sources (docs, website, release notes)
- Report suspicious signatures to security@fulmenhq.dev

**For Maintainers**:
- Never sign on untrusted machines
- Verify build artifacts before signing
- Use YubiKey PIN protection
- Review signature verification before release publication

## Installation

```bash
# Go install (recommended)
go install github.com/fulmenhq/goneat@v0.3.3

# Verify installation
goneat version
```

**With Signature Verification**:
```bash
# Download and verify before installing
curl -LO https://github.com/fulmenhq/goneat/releases/download/v0.3.3/goneat-darwin-arm64.tar.gz
curl -LO https://github.com/fulmenhq/goneat/releases/download/v0.3.3/goneat-darwin-arm64.tar.gz.asc
curl -L https://github.com/fulmenhq/goneat/releases/download/v0.3.3/fulmenhq-release-signing-key.asc | gpg --import
gpg --verify goneat-darwin-arm64.tar.gz.asc goneat-darwin-arm64.tar.gz
tar -xzf goneat-darwin-arm64.tar.gz
```

## Upgrade Notes

No breaking changes. Simply upgrade to v0.3.3:

```bash
go install github.com/fulmenhq/goneat@v0.3.3
```

**New Recommendation**: Verify signatures for all future downloads to ensure authenticity and protect against supply chain attacks.

## Benefits

### Supply Chain Integrity

- **Authenticity**: Cryptographic proof that artifacts come from FulmenHQ
- **Integrity**: Detect tampering or corruption during download
- **Non-Repudiation**: Signed with official FulmenHQ key

### Package Manager Distribution

- **Homebrew Requirements**: Signing satisfies security requirements for official taps
- **Scoop Best Practices**: Aligns with Scoop package verification expectations
- **Enterprise Adoption**: Meets enterprise security and compliance standards

### Trust Establishment

- **Public Key Distribution**: Multiple trusted channels (docs, website, releases)
- **Key Fingerprint Verification**: Establish trust through out-of-band verification
- **Revocation Capability**: Emergency procedures for compromised keys

## Security

### Reporting Security Issues

For security concerns or to report key compromise:
- **Email**: security@fulmenhq.dev
- **GitHub Security Advisories**: https://github.com/fulmenhq/goneat/security
- **PGP Key**: Available in release assets

### Key Management

- **Primary Key Custodian**: @3leapsdave
- **Signing Key Locations**: Hardware tokens (YubiKey)
- **Backup Strategy**: Encrypted backups in dual secure locations
- **Rotation Schedule**: Annual renewal

## Links

- **Repository**: https://github.com/fulmenhq/goneat
- **CHANGELOG**: See [CHANGELOG.md](../../CHANGELOG.md) for full details
- **Signing Documentation**: [release-signing.md](../security/release-signing.md)
- **Feature Brief**: `.plans/active/v0.3.3/release-signing-feature-brief.md`
- **v0.3.2 Release**: See [v0.3.2.md](v0.3.2.md)
- **v0.3.1 Release**: See [v0.3.1.md](v0.3.1.md)
- **v0.3.0 Release**: See [v0.3.0.md](v0.3.0.md)

---

**Next**: v0.3.4 will introduce automated CI signing using the staged CI subkey with OIDC-based secrets management.
