# Goneat v0.3.22 — Assess Scaffolding + Hooks UX + Offline Schema Refs

**Release Date**: 2025-12-20
**Status**: Draft

## Overview

Goneat v0.3.22 improves repo onboarding for `assess` configuration and makes hooks behavior easier to inspect. It also hardens hook generation against bash glob expansion regressions.

## ✅ What changed

### Doctor: scaffold `.goneat/assess.yaml`

- New command: `goneat doctor assess init`
  - Detects repo type and seeds a starter `.goneat/assess.yaml`.
  - Supports `--language ...` and `--force`.

### Hooks: inspect/validate now show effective behavior

- `goneat hooks validate` and `goneat hooks inspect` now print:
  - effective wrapper invocation (`goneat assess --hook ... --hook-manifest ...`)
  - internal vs external command classification
  - mutator warnings (e.g., `format`, `assess --fix`, `stage_fixed`, `make precommit`)

- New: `--format json` for both `hooks validate` and `hooks inspect`.

### Validate: offline `$ref` resolution

- `goneat validate data --ref-dir` can preload local schemas to resolve remote `$ref` URLs (useful before a schema registry host is live).

### Hooks generation: safer bash defaults

- Bash hooks now disable glob expansion (`set -f`) to prevent patterns like `.cache/**` from expanding into huge argument lists.
- Internal embed drift addressed by standardizing on canonical embedded hook templates under `templates/hooks/...`.

---

*Generated by Arch Eagle ([OpenCode](https://github.com/sst/opencode)) under supervision of @3leapsdave*
