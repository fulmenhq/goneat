# Goneat v0.2.5 Release Notes

**Release Date**: 2025-09-13
**Version**: v0.2.5
**Codename**: Foundation Tools Management

## Overview

Goneat v0.2.5 introduces comprehensive foundation tools management, bringing essential development tools like ripgrep, jq, and go-licenses under goneat's intelligent management system. This release focuses on solving the common problem of missing or outdated tools that cause CI/CD failures and development friction.

## Key Features

### 🛠️ Foundation Tools Management

- **New `foundation` scope** for `goneat doctor tools` command
- **Cross-platform support** for macOS, Linux, and Windows
- **Schema-driven configuration** with JSON Schema validation
- **User customization** via `.goneat/tools.yaml` configuration files
- **Tool name vs binary name handling** (e.g., `ripgrep` vs `rg`)

### 🔧 Enhanced CLI Experience

- **`--dry-run` flag**: Preview installations without executing
- **`--config` flag**: Specify custom tools configuration file
- **`--list-scopes` flag**: Display available tool scopes
- **`--validate-config` flag**: Validate configuration files
- **JSON output support**: Structured output for AI agents and automation

### 🎯 Assessment Integration

- **Tools checking in `goneat assess`**: New `tools` category with priority 1
- **Git hooks integration**: Automatic tools validation in pre-commit and pre-push hooks
- **Parallel execution**: Tools checking runs alongside other assessments
- **CI/CD ready**: Fails assessments when required tools are missing

## Supported Tools

### Foundation Scope

| Tool            | Purpose                  | Cross-Platform | Installation Method       |
| --------------- | ------------------------ | -------------- | ------------------------- |
| **ripgrep**     | Fast text search         | ✅             | Version manager → Package |
| **jq**          | JSON processing          | ✅             | Version manager → Package |
| **go-licenses** | License compliance       | ✅             | Go install                |
| **mise**        | Polyglot runtime manager | ✅             | Direct download           |
| **yamlfmt**     | YAML formatter           | ✅             | Go install → Version mgr  |
| **prettier**    | Code formatter           | ✅             | Version manager → NPM     |

## Configuration

### Default Configuration

Goneat includes sensible defaults for all foundation tools. No configuration is required to get started.

### Custom Configuration

Create `.goneat/tools.yaml` to customize tool policies:

```yaml
# Example: Add custom tools to foundation scope
scopes:
  foundation:
    description: "Core foundation tools required for goneat and basic AI agent operation"
    tools: [ripgrep, jq, go-licenses, yamllint, shellcheck]

tools:
  yamllint:
    name: "yamllint"
    description: "YAML linter"
    kind: "system"
    detect_command: "yamllint --version"
    install_commands:
      darwin: "brew install yamllint"
      linux: "pip install yamllint"
      windows: "pip install yamllint"
```

## Usage Examples

### Basic Tools Checking

```bash
# Check foundation tools
goneat doctor tools --scope foundation

# Install missing tools
goneat doctor tools --scope foundation --install --yes

# Dry run to preview installations
goneat doctor tools --scope foundation --dry-run
```

### Assessment Integration

```bash
# Tools checking in comprehensive assessment
goneat assess --categories tools

# Tools checking in git hooks (automatically configured)
git commit -m "Add new feature"
# Pre-commit hook automatically runs tools checking
```

### JSON Output for Automation

```bash
# Structured output for CI/CD systems
goneat doctor tools --scope foundation --json
```

## Migration Guide

### For Existing Users

- **No action required**: All existing functionality remains unchanged
- **New features**: Foundation tools are opt-in via `--scope foundation`
- **Hooks**: Existing hooks will automatically include tools checking on next regeneration

### For CI/CD Pipelines

- **Add tools checking**: Include `--categories tools` in assessment commands
- **JSON output**: Use `--json` flag for programmatic consumption
- **Dry run**: Use `--dry-run` to validate tool requirements without installation

## Technical Details

### Schema System

- **JSON Schema Draft 2020-12** compliance
- **Embedded default configuration** with user override support
- **Comprehensive validation** with detailed error reporting
- **Schema location**: `schemas/tools/v1.0.0/tools-config.yaml`

### Tool Detection

- **Command parsing**: Handles complex detection commands (e.g., "rg --version")
- **Version extraction**: Extracts version information from tool output
- **Platform-specific detection**: Different detection methods per platform
- **Fallback handling**: Clear instructions when automated detection fails

### Installation Methods

- **Go tools**: Uses `go install` with package paths
- **System tools**: Platform-specific package managers (brew, apt, pacman, winget)
- **Cross-platform**: Automatic platform detection and appropriate installation method
- **Error handling**: Graceful fallbacks with manual installation instructions

## What's Coming Next

- **Tool Versioning**: Version requirements and update policies (v0.2.6)
- **Expanded Tool Catalog**: Additional foundation tools like yamllint and shellcheck
- **Version Introspection**: Enhanced version detection and comparison
- **Policy Enforcement**: Fail assessments on version mismatches

## Additional Improvements

### Intelligent Installation Strategy

Goneat v0.2.5 introduces a sophisticated cross-platform installation strategy that prioritizes user experience and operational efficiency:

#### Key Features

- **Ranked Choice Installation**: Multiple installation methods tried in order of preference
- **Zero-Sudo Philosophy**: Prioritizes version managers (mise) to avoid sudo requirements on Linux
- **Language-Native Methods**: Uses `go install` for Go tools, respects project dependencies
- **Platform Intelligence**: Automatic detection and optimization for macOS, Linux, and Windows
- **Graceful Fallbacks**: Clear instructions when automated installation isn't possible

#### Installation Priority Examples

```bash
# Linux: mise (no sudo) → package manager with clear instructions
linux: "mise use ripgrep@latest 2>/dev/null || echo '📦 Run: sudo apt-get install ripgrep' && exit 1"

# macOS: mise → Homebrew
darwin: "mise use ripgrep@latest || brew install ripgrep"

# Windows: Winget (built-in) → Scoop
windows: "winget install BurntSushi.ripgrep.MSVC || scoop install ripgrep"
```

**📖 Learn More**: See [Intelligent Tool Installation Strategy](docs/appnotes/intelligent-tool-installation.md) for comprehensive documentation.

### Version Command Enhancements

- **Better Semver Defaults**: The `basic` template now defaults to `0.1.0` instead of `1.0.0` to align with semantic versioning best practices for initial releases
- **Enhanced Documentation**: Updated help text and examples to show how users can specify custom initial versions using the `--initial-version` flag
- **Improved User Experience**: More intuitive defaults that follow semver conventions for development and early-stage projects

### Assessment Engine Fixes

- **Category Error Handling**: Fixed the `shouldFail` function to properly handle category-level errors (e.g., lint configuration failures) ensuring assessments fail appropriately when tools encounter execution errors

## Breaking Changes

None. This release is 100% backward compatible.

## Installation

```bash
# Go
go install github.com/fulmenhq/goneat@v0.2.5

# Homebrew (if tap available)
brew install 3leaps/tap/goneat

# Direct download
curl -L https://github.com/fulmenhq/goneat/releases/download/v0.2.5/goneat-linux-amd64 -o goneat
chmod +x goneat
```

## Files Changed

### New Files

- `schemas/tools/v1.0.0/tools-config.yaml` - JSON Schema definition
- `internal/assess/tools_runner.go` - Assessment runner for tools checking
- `internal/doctor/tools_config.go` - Configuration types and loading
- `internal/doctor/tools_validate.go` - Schema validation logic
- `internal/doctor/tools_defaults.go` - Embedded default configuration
- `internal/doctor/tools-defaults.yaml` - Default tools configuration

### Modified Files

- `cmd/doctor.go` - Added dry-run flag and configuration system integration
- `internal/assess/types.go` - Added CategoryTools
- `internal/assess/priorities.go` - Added tools priority (1)
- `internal/schema/validator.go` - Registered tools schema
- `.goneat/hooks.yaml` - Updated to include tools checking

## Support

For questions, issues, or feature requests related to v0.2.5:

- **GitHub Issues**: [Create an issue](https://github.com/fulmenhq/goneat/issues)
- **Documentation**: [User Guide](https://github.com/fulmenhq/goneat/docs/user-guide)
- **Community**: [Discussions](https://github.com/fulmenhq/goneat/discussions)

---

**Generated by Code Scout under supervision of @3leapsdave**
