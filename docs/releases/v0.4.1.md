# Goneat v0.4.1 — Rust Toolchain Detection (Phase 0)

**Release Date**: TBD
**Status**: In Development

## TL;DR

- **Rust project detection**: automatic Cargo.toml and workspace detection
- **Rust tools scope**: `goneat doctor tools --scope rust` for cargo-deny, cargo-audit
- **Verify-only mode**: tools detected but not auto-installed (manual install via cargo)

## What Changed

### Rust Toolchain Support (Foundation)

Goneat now detects Rust projects and integrates Rust security tools into the doctor tooling system:

| Tool         | Purpose                          | Min Version | Install Command                   |
| ------------ | -------------------------------- | ----------- | --------------------------------- |
| cargo-deny   | License, advisory, ban checks    | 0.14.0      | `cargo install cargo-deny --locked` |
| cargo-audit  | RustSec vulnerability scanning   | 0.18.0      | `cargo install cargo-audit --locked` |

#### Rust Project Detection

Goneat automatically detects Rust projects via:

1. **Primary**: `Cargo.toml` at target path or in parent directories
2. **Workspace-aware**: correctly identifies workspace roots vs members
3. **Fallback**: `.rs` files without Cargo.toml (rare non-Cargo Rust)

```bash
# Detect Rust tools
goneat doctor tools --scope rust

# Expected output (tools not installed):
# cargo-deny: not found (minimum: 0.14.0)
# cargo-audit: not found (minimum: 0.18.0)
```

#### Verify-Only Mode

Rust tools use **verify-only** mode in v0.4.x:

- Tools are detected and version-checked
- **No auto-install** (cargo install compiles from source, slow)
- Manual installation required

This is intentional—most Rust developers prefer explicit `cargo install` commands.

#### Future: cargo-install Support (v0.5.0)

Full `cargo-install` integration planned for v0.5.0:

- Schema extension for `cargo` tool kind
- `goneat doctor tools --scope rust --install` support
- Automated cargo install with `--locked` flag

### Developer Experience

#### Embedded Assets Warning

Added explicit guidance in AGENTS.md about embedded asset directories:

| Source (edit here) | Destination (never edit)                  |
| ------------------ | ----------------------------------------- |
| `config/`          | `internal/assets/embedded_config/config/` |
| `templates/`       | `internal/assets/embedded_templates/`     |
| `schemas/`         | `internal/assets/embedded_schemas/`       |

Edits to `internal/assets/embedded*/` are silently overwritten by `make build`.

## Upgrade Notes

### From v0.4.0

No breaking changes. Rust detection and tooling are additive.

### Installing Rust Tools

If you work with Rust projects and want goneat to check for security issues:

```bash
# Install tools
cargo install cargo-deny --locked
cargo install cargo-audit --locked

# Verify installation
goneat doctor tools --scope rust
```

## Known Limitations

1. **Rust assess integration not yet implemented** — Phase 1 (security category) coming in subsequent v0.4.x releases
2. **No auto-install** — Rust tools require manual `cargo install`
3. **clippy integration deferred** — cargo-clippy for lint category planned for later phase

## What's Next

- **Phase 1**: Security category integration (cargo-audit, cargo-deny advisories)
- **Phase 2**: Dependencies category integration (cargo-deny licenses, bans)
- **Phase 3**: Lint category integration (cargo-clippy)

---

*For detailed implementation plans, see `.plans/active/v0.4.1/`*
