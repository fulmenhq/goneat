<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{Project.Name}} ‚Äî goneat assessment report</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 30px; }
        .project-title { font-size: 2.6rem; color: #2c3e50; margin-bottom: 6px; font-weight: 700; }
        .project-path { font-size: 1.0rem; color: #2c3e50; font-family: 'Monaco', 'Menlo', monospace; margin-bottom: 6px; }
        .project-subtitle { font-size: 0.95rem; color: #7f8c8d; margin-bottom: 16px; }
        
        .summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { padding: 20px; border-radius: 6px; text-align: center; border-left: 4px solid #007bff; }
        .health { border-left-color: #28a745; }
        .issues { border-left-color: #dc3545; }
        .value { font-size: 2rem; font-weight: bold; color: #007bff; }

        /* File grouping styles */
        .file-group { margin-bottom: 15px; border: 1px solid #e9ecef; border-radius: 6px; overflow: hidden; }
        .file-header { background: #f8f9fa; padding: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .file-header:hover { background: #e9ecef; }
        .file-name { font-weight: 600; color: #495057; }
        .file-count { background: #007bff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.9rem; }
        .file-issues { display: none; background: white; }
        .file-issues.expanded { display: block; }
        .issue-row { padding: 12px 15px; border-bottom: 1px solid #f0f0f0; display: flex; align-items: center; }
        .issue-row:last-child { border-bottom: none; }
        .issue-line { min-width: 60px; color: #6c757d; }
        .issue-severity { min-width: 80px; }
        .issue-category { min-width: 120px; color: #6c757d; }
        .issue-message { flex: 1; }

        .severity-critical { color: #dc3545; font-weight: 600; }
        .severity-high { color: #fd7e14; font-weight: 600; }
        .severity-medium { color: #ffc107; font-weight: 600; }
        .severity-low { color: #28a745; font-weight: 600; }
        .severity-info { color: #6c757d; font-weight: 600; }

        .footer { margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 6px; text-align: center; color: #6c757d; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="project-title">{{Project.Name}}</h1>
            <div class="project-path">{{Project.DisplayPath}}</div>
            <div class="project-subtitle">goneat v{{Metadata.Version}} ‚Ä¢ {{Metadata.GeneratedAt}} ‚Ä¢ assessment report</div>
        </div>

        <div class="summary">
            <div class="card health">
                <h3>Overall Health</h3>
                <div class="value">{{Summary.HealthPercent}}%</div>
            </div>
            <div class="card issues">
                <h3>Total Issues</h3>
                <div class="value">{{Summary.TotalIssues}}</div>
            </div>
            <div class="card">
                <h3>Critical Issues</h3>
                <div class="value">{{Summary.CriticalIssues}}</div>
            </div>
            <div class="card">
                <h3>Est. Fix Time</h3>
                <div class="value">{{Summary.EstimatedTimeMinutes}}m</div>
            </div>
        </div>

        <h2>Assessment Results</h2>
        {{#if FileGroups}}
        <div class="issues-container">
            {{#each FileGroups}}
            <div class="file-group">
                <div class="file-header" onclick="toggleFile('file-{{@index}}')">
                    <span class="file-name">üìÅ {{this.Filename}}</span>
                    <span class="file-count">{{this.Count}} issue{{#if (gt this.Count 1)}}s{{/if}}</span>
                </div>
                <div id="file-{{@index}}" class="file-issues">
                    {{#each this.Issues}}
                    <div class="issue-row">
                        <span class="issue-line">Line {{this.Line}}</span>
                        <span class="issue-severity severity-{{this.Severity}}">{{this.Severity}}</span>
                        <span class="issue-category">{{this.Category}}</span>
                        <span class="issue-message">{{this.Message}}</span>
                    </div>
                    {{/each}}
                </div>
            </div>
            {{/each}}
        </div>
        {{else}}
        <div style="text-align: center; padding: 40px; color: #6c757d;">
            <h3>üéâ No Issues Found!</h3>
            <p>This codebase is in excellent condition.</p>
        </div>
        {{/if}}

        <div class="footer">
            <p>
                Report generated by <strong>goneat</strong> v{{Metadata.Version}} |
                Execution time: {{Metadata.ExecutionTime}} |
                Target: {{Project.DisplayPath}}
            </p>
        </div>
    </div>

    <script>
        function toggleFile(fileId) {
            const issuesDiv = document.getElementById(fileId);
            issuesDiv.classList.toggle('expanded');
        }

        // Helper function for comparisons in templates
        function gt(a, b) {
            return a > b;
        }
    </script>
</body>
</html>
