# Feature Brief: License CLI Integration & Assess Wiring

**Release**: v0.2.1 (point release)
**Owner**: Code Scout (supervised by @3leapsdave)
**Status**: Draft → Ready for implementation
**Generated by**: Code Scout ([Opencode](https://opencode.ai/)) under supervision of [@3leapsdave](https://github.com/3leapsdave)

## Goal

Provide first-class license compliance support:

- Add `goneat license` command to generate machine-readable (JSON/Markdown) license inventory and audit results.
- Integrate license signals into `goneat assess` so license compliance appears alongside format/lint/security.

## Motivation

- Ensure every release validates dependency licenses (no GPL/LGPL/AGPL/MPL/CDDL) and includes redistributable license texts.
- Enable automated pipelines to consume structured license results.

## Scope

- New CLI: `license` with sub-modes
  - `goneat license inventory --format json|markdown --output <file>`
  - `goneat license audit --format json` (non-zero exit for forbidden licenses)
  - `goneat license save --path docs/licenses/third-party` (for distributions)
- Assess integration:
  - Add new category `license` (or `compliance`), surfaced in `assess` with issue severities:
    - High: forbidden licenses detected
    - Medium: unknown/unclassified licenses or missing license text
    - Low: minor metadata inconsistencies (e.g., version-less URL hints)

## Design

- Implementation wrapper around `go-licenses` with graceful install guidance when missing.
- JSON output schema (draft):
  - `metadata`: tool, version, generated_at
  - `summary`: totals by license family; forbidden_count; unknown_count
  - `dependencies[]`: { module, version, license, license_url, path(optional) }
- Assess adapter:
  - Runner `LicenseAssessmentRunner` producing issues mapped from audit results.
  - Config flags: `--license-forbidden "GPL|LGPL|AGPL|MPL|CDDL"` (default), `--license-save-path`, `--license-skip-save`.

## UX Examples

```bash
# Generate inventory
goneat license inventory --format json --output docs/licenses/inventory.json

# Audit (non-zero on forbidden)
goneat license audit --format json > dist/reports/license-audit.json

# In assess (adds license category)
goneat assess --categories license --format json
```

## Risks & Mitigations

- Tool Availability: If `go-licenses` missing, print install hint and fallback to best-effort parsing.
- False Positives: Maintain allowlist/override in config for edge cases (e.g., unknown → treated as MIT after manual verification).

## Done Criteria

- `goneat license` implemented with JSON/markdown outputs.
- `assess` shows `license` category with proper severity mapping.
- CI runs license audit on PRs and blocks forbidden licenses.

## Rollout

- v0.2.1 ships CLI + assess integration.
- v0.2.2 adds CI wiring and docs expansion (user guide + release SOP).

Co-Authored-By: Code Scout <noreply@3leaps.net>
Co-Authored-By: Forge Neat <noreply@3leaps.net>
Authored-By: Dave Thompson <dave.thompson@3leaps.net> [@3leapsdave](https://github.com/3leapsdave)
